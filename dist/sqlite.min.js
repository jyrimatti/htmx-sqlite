(function(){var f;var u;var g=function(t){var e=f.getInputValues(t,"post");var r=e.values;var n=f.getExpressionVars(t);var a=f.mergeObjects(r,n);var i=f.filterValues(a,t);return i};var d=function(t,s,l){var o=f.getTarget(s);if(o==null||o==f.DUMMY_ELT){f.triggerErrorEvent(s,"htmx:targetError",{target:f.getAttributeValue(s,"hx-target")});return}var e={shouldSwap:true,target:o,elt:s};if(!f.triggerEvent(o,"htmx:beforeSwap",e))return;o=e.target;l.target=o;l.failed=false;l.successful=true;var c=t.length==0?"":JSON.stringify(t);if(e.shouldSwap){f.withExtensions(s,function(t){c=t.transformResponse(c,undefined,s)});var h=f.getSwapSpecification(s,undefined);o.classList.add(htmx.config.swappingClass);var r=function(){try{var t=document.activeElement;var e={};try{e={elt:t,start:t?t.selectionStart:null,end:t?t.selectionEnd:null}}catch(t){}var r=f.makeSettleInfo(o);f.selectAndSwap(h.swapStyle,o,s,c,r,undefined);if(e.elt&&!f.bodyContains(e.elt)&&f.getRawAttribute(e.elt,"id")){var n=document.getElementById(f.getRawAttribute(e.elt,"id"));var a={preventScroll:h.focusScroll!==undefined?!h.focusScroll:!htmx.config.defaultFocusScroll};if(n){if(e.start&&n.setSelectionRange){try{n.setSelectionRange(e.start,e.end)}catch(t){}}n.focus(a)}}o.classList.remove(htmx.config.swappingClass);r.elts.forEach(function(t){if(t.classList){t.classList.add(htmx.config.settlingClass)}f.triggerEvent(t,"htmx:afterSwap",l)});var i=function(){r.tasks.forEach(function(t){t.call()});r.elts.forEach(function(t){if(t.classList){t.classList.remove(htmx.config.settlingClass)}f.triggerEvent(t,"htmx:afterSettle",l)})};if(h.settleDelay>0){setTimeout(i,h.settleDelay)}else{i()}}catch(t){f.triggerErrorEvent(s,"htmx:swapError",l);throw t}};var n=htmx.config.globalViewTransitions;if(h.hasOwnProperty("transition")){n=h.transition}if(n&&f.triggerEvent(s,"htmx:beforeTransition",l)&&typeof Promise!=="undefined"&&document.startViewTransition){var a=new Promise(function(t,e){settleResolve=t;settleReject=e});var i=r;r=function(){document.startViewTransition(function(){i();return a})}}if(h.swapDelay>0){setTimeout(r,h.swapDelay)}else{r()}}};htmx.defineExtension("sqlite",{init:function(t){f=t;u={maxPageSize:4096,timeout:1e4,cacheSize:4096}},onEvent:function(t,e){if(t==="htmx:afterProcessNode"){let r=e.detail.elt;if(r.hasAttribute("hx-sql")){var n=f.getTriggerSpecs(r);n.forEach(function(t){var e=f.getInternalData(r);f.addTriggerHandler(r,t,e,function(a,t){if(htmx.closest(a,htmx.config.disableSelector)){cleanUpElement(a);return}var r={};Object.entries(g(a)).forEach(function([t,e]){r["$"+t]=e});var e=a.getAttribute("hx-sql");if(e==""){e=a.value;if(!htmx.closest(a,"[hx-target]")){throw new Error("Attribute 'hx-target' is required when 'hx-sql' is empty")}}var n=htmx.closest(a,"[hx-db]");if(!n){throw new Error("Attribute 'hx-db' is required in the ancestor hierarchy")}var i=htmx.closest(a,"[hx-db-config]");var s=i?JSON.parse(i.getAttribute("hx-db-config")):{};var l={...u,...s};var o=n.getAttribute("hx-db");var c;if(n._htmx_sqlite_http_backend){c=n._htmx_sqlite_http_backend}else{c=o.match(/^https?:/)?{http:sqliteWasmHttp.createHttpBackend(l)}:{};n._htmx_sqlite_http_backend=c}n.addEventListener("htmx:beforeCleanupElement",function(t){if(t.detail.elt==n&&n._htmx_sqlite_http_backend&&n._htmx_sqlite_http_backend.http){n._htmx_sqlite_http_backend.http.close();delete n._htmx_sqlite_http_backend}});var h=[];sqliteWasmHttp.createSQLiteThread(c).then(function(t){t("open",{filename:encodeURI(o.match(/^https?:\/\//)?o:o.replace(/^opfs:/,"").replace(/^https?:/,"file:")),vfs:o.replace(/:.*/,"").replace("https","http")});return t}).then(function(n){f.triggerEvent(a,"htmx:sql:loadstart",{elt:a,xhr:{db:n}});n("exec",{sql:e,bind:r,rowMode:"object",callback:function(t){if(t.row){h.push(t.row);f.triggerEvent(a,"htmx:sql:progress",{elt:a,xhr:{db:n,response:t.row}})}else{f.triggerEvent(a,"htmx:sql:loadend",{elt:a,xhr:{db:n}});n("close",{}).then(function(){n.close()});var e={elt:a,xhr:{db:n,response:h},target:f.getTarget(a)};var r=!f.triggerEvent(a,"htmx:beforeOnLoad",e);if(e.target&&!r){d(h,a,e)}}}})})})})}}}})})();