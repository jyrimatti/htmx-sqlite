(()=>{"use strict";var e,t,r={806:(e,t,r)=>{var i=r(309),n=r(523),o=r(595),s=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let a;const c={},l=new i.A({max:32});let d,u=1;const f={xOpen:function(e){return s(this,void 0,void 0,(function*(){let t=l.get(e.url);return t instanceof Promise&&(t=yield t),void 0!==t||(t=fetch(e.url,{method:"HEAD",headers:Object.assign({},null==a?void 0:a.headers)}).then((t=>{var r;return"bytes"!==t.headers.get("Accept-Ranges")&&console.warn(`Server for ${e.url} does not advertise 'Accept-Ranges'. If the server supports it, in order to remove this message, add "Accept-Ranges: bytes". Additionally, if using CORS, add "Access-Control-Expose-Headers: *".`),{url:e.url,id:u++,size:BigInt(null!==(r=t.headers.get("Content-Length"))&&void 0!==r?r:0),pageSize:null}})),l.set(e.url,t),l.set(e.url,yield t)),0}))},xAccess:function(e,t){return s(this,void 0,void 0,(function*(){const r=new Uint32Array(t.shm,0,1);try{const i=yield f.xOpen(e,t);r[0]=0===i?1:0}catch(e){r[0]=0}return 0}))},xRead:function(e,t){var r,i,c;return s(this,void 0,void 0,(function*(){let s=l.get(e.url);if(!s)throw new Error(`File ${e.url} not open`);if(s instanceof Promise&&(s=yield s),void 0===e.n||void 0===e.offset)throw new Error("Mandatory arguments missing");if(!s.pageSize){s.pageSize=1024;const t=new ArrayBuffer(2),c=yield f.xRead({msg:"xRead",url:e.url,offset:BigInt(16),n:2},{buffer:new Uint8Array(t)}),l=new Uint16Array(t);if(0!==c)return c;if((0,o.l)(l),s.pageSize=l[0],n.debug.vfs(`page size is ${s.pageSize}`),1024!=s.pageSize&&(console.warn(`Page size for ${e.url} is ${s.pageSize}, recommended size is 1024`),d.delete(s.id+"|0")),s.pageSize>(null!==(r=null==a?void 0:a.maxPageSize)&&void 0!==r?r:n.defaultOptions.maxPageSize))throw new Error(`${s.pageSize} is over the maximum configured ${null!==(i=null==a?void 0:a.maxPageSize)&&void 0!==i?i:n.defaultOptions.maxPageSize}`)}const u=BigInt(s.pageSize),g=BigInt(e.n),h=e.offset/u;h*u!==e.offset&&n.debug.vfs(`Read chunk ${e.offset}:${e.n} is not page-aligned`);let p=h*u;if(p+u<e.offset+g)throw new Error(`Read chunk ${e.offset}:${e.n} spans across a page-boundary`);const m=s.id+"|"+h;let v=d.get(m);if(v instanceof Promise&&(v=yield v),"number"==typeof v){n.debug.cache(`cache hit (multi-page segment) for ${e.url}:${h}`);const t=BigInt(v)*u;v=d.get(s.id+"|"+v),v instanceof Promise&&(v=yield v),v instanceof Uint8Array?p=t:v=void 0}if(void 0===v){n.debug.cache(`cache miss for ${e.url}:${h}`);let t=s.pageSize,r=h>0&&d.get(s.id+"|"+(Number(h)-1));r&&(r instanceof Promise&&(r=yield r),"number"==typeof r&&(r=d.get(s.id+"|"+r)),r instanceof Promise&&(r=yield r),r instanceof Uint8Array&&(t=2*r.byteLength,n.debug.cache(`downloading super page of size ${t}`)));const i=t/s.pageSize;n.debug.http(`downloading page ${h} of size ${t} starting at ${p}`);const o=fetch(e.url,{method:"GET",headers:Object.assign(Object.assign({},null!==(c=null==a?void 0:a.headers)&&void 0!==c?c:n.defaultOptions.headers),{Range:`bytes=${p}-${p+BigInt(t-1)}`})}).then((e=>e.arrayBuffer())).then((e=>new Uint8Array(e)));d.set(m,o);for(let e=Number(h)+1;e<Number(h)+i;e++)d.set(s.id+"|"+e,o.then((()=>Number(h))));if(v=yield o,!(v instanceof Uint8Array)||0===v.length)throw new Error(`Invalid HTTP response received: ${JSON.stringify(o)}`);d.set(m,v);for(let e=Number(h)+1;e<Number(h)+i;e++)d.set(s.id+"|"+e,Number(h))}else n.debug.cache(`cache hit for ${e.url}:${h}`);const y=Number(e.offset-p);return t.buffer.set(v.subarray(y,y+e.n)),0}))},xFilesize:function(e,t){return s(this,void 0,void 0,(function*(){let r=l.get(e.url);if(!r)throw new Error(`File ${e.fid} not open`);return r instanceof Promise&&(r=yield r),new BigInt64Array(t.shm,0,1)[0]=r.size,0}))}};function g({data:e}){return s(this,void 0,void 0,(function*(){let t;n.debug.threads("Received new work message",this,e);try{t=yield f[e.msg](e,this),n.debug.threads("operation successful",this,t),Atomics.store(this.lock,0,t)}catch(e){console.error(e),Atomics.store(this.lock,0,1)}Atomics.notify(this.lock,0)}))}if(globalThis.onmessage=({data:e})=>{var t,r,o,s;switch(n.debug.threads("Received new control message",e),e.msg){case"handshake":{const i=new SharedArrayBuffer((null!==(t=null==a?void 0:a.maxPageSize)&&void 0!==t?t:n.defaultOptions.maxPageSize)+Int32Array.BYTES_PER_ELEMENT),s=new Int32Array(i,null!==(r=null==a?void 0:a.maxPageSize)&&void 0!==r?r:n.defaultOptions.maxPageSize),l=new Uint8Array(i,0,null!==(o=null==a?void 0:a.maxPageSize)&&void 0!==o?o:n.defaultOptions.maxPageSize);Atomics.store(s,0,n.SYNC.HANDSHAKE),c[e.id]={id:e.id,port:e.port,shm:i,lock:s,buffer:l},e.port.onmessage=g.bind(c[e.id]),postMessage({msg:"ack",id:e.id,shm:i,lock:s})}break;case"init":a=e.options,d=new i.A({maxSize:1024*(null!==(s=null==a?void 0:a.cacheSize)&&void 0!==s?s:n.defaultOptions.cacheSize),sizeCalculation:e=>{var t;return null!==(t=e.byteLength)&&void 0!==t?t:4}});break;case"close":postMessage({msg:"ack"}),close();break;default:throw new Error(`Invalid message received by backend: ${e}`)}},"undefined"==typeof SharedArrayBuffer)throw new Error('SharedArrayBuffer is not available. If your browser supports it, the webserver must send "Cross-Origin-Opener-Policy: same-origin "and "Cross-Origin-Embedder-Policy: require-corp" headers.')}},i={};function n(e){var t=i[e];if(void 0!==t)return t.exports;var o=i[e]={exports:{}};return r[e](o,o.exports,n),o.exports}n.m=r,n.x=()=>{var e=n.O(void 0,[87],(()=>n(806)));return n.O(e)},e=[],n.O=(t,r,i,o)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,i,o]=e[d],a=!0,c=0;c<r.length;c++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(a=!1,o<s&&(s=o));if(a){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,i,o]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"sqlite-wasm-http-"+e+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={806:1};n.f.i=(t,r)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkhtmx_sqlite=self.webpackChunkhtmx_sqlite||[],r=t.push.bind(t);t.push=t=>{var[i,o,s]=t;for(var a in o)n.o(o,a)&&(n.m[a]=o[a]);for(s&&s(n);i.length;)e[i.pop()]=1;r(t)}})(),t=n.x,n.x=()=>n.e(87).then(t),n.x()})();